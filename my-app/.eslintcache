[{"/Users/steve/Projects/Semantically/my-app/src/index.js":"1","/Users/steve/Projects/Semantically/my-app/src/App.js":"2","/Users/steve/Projects/Semantically/my-app/src/reportWebVitals.js":"3","/Users/steve/Projects/Semantically/my-app/src/components/Highlights.js":"4","/Users/steve/Projects/Semantically/my-app/src/hooks/NCBOTree.js":"5","/Users/steve/Projects/Semantically/my-app/src/components/Sidebar.js":"6","/Users/steve/Projects/Semantically/my-app/src/hooks/sortKeys.js":"7","/Users/steve/Projects/Semantically/my-app/src/components/SidebarFooter.js":"8","/Users/steve/Projects/Semantically/my-app/src/components/SidebarBody.js":"9","/Users/steve/Projects/Semantically/my-app/src/components/SidebarHeader.js":"10","/Users/steve/Projects/Semantically/my-app/src/components/SidebarLoader.js":"11","/Users/steve/Projects/Semantically/my-app/src/hooks/getText.js":"12","/Users/steve/Projects/Semantically/my-app/src/hooks/getRecommenderAnnotations.js":"13","/Users/steve/Projects/Semantically/my-app/src/components/SidebarAccordion.js":"14","/Users/steve/Projects/Semantically/my-app/src/components/ManualOntologySelector.js":"15","/Users/steve/Projects/Semantically/my-app/src/hooks/getDefinition.js":"16"},{"size":500,"mtime":1617375849468,"results":"17","hashOfConfig":"18"},{"size":1259,"mtime":1623537289960,"results":"19","hashOfConfig":"18"},{"size":362,"mtime":1617375849468,"results":"20","hashOfConfig":"18"},{"size":2476,"mtime":1623537472241,"results":"21","hashOfConfig":"18"},{"size":14261,"mtime":1617375849468,"results":"22","hashOfConfig":"18"},{"size":1640,"mtime":1623536794775,"results":"23","hashOfConfig":"18"},{"size":550,"mtime":1617375849468,"results":"24","hashOfConfig":"18"},{"size":78,"mtime":1617375849467,"results":"25","hashOfConfig":"18"},{"size":1062,"mtime":1623536856488,"results":"26","hashOfConfig":"18"},{"size":2390,"mtime":1623532085486,"results":"27","hashOfConfig":"18"},{"size":198,"mtime":1617375849467,"results":"28","hashOfConfig":"18"},{"size":138,"mtime":1617375849468,"results":"29","hashOfConfig":"18"},{"size":2579,"mtime":1622928501328,"results":"30","hashOfConfig":"18"},{"size":8329,"mtime":1623538332808,"results":"31","hashOfConfig":"18"},{"size":2710,"mtime":1623534028859,"results":"32","hashOfConfig":"18"},{"size":398,"mtime":1617375849468,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"8u57qr",{"filePath":"37","messages":"38","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"36"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44","usedDeprecatedRules":"36"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"36"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56","usedDeprecatedRules":"36"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"59","usedDeprecatedRules":"36"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"66","usedDeprecatedRules":"36"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"69","usedDeprecatedRules":"36"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"72","usedDeprecatedRules":"36"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/steve/Projects/Semantically/my-app/src/index.js",[],["75","76"],"/Users/steve/Projects/Semantically/my-app/src/App.js",["77"],"import 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\n\nimport React, { useState } from 'react';\n\nimport $ from 'jquery';\n\nimport Sidebar from './components/Sidebar';\nimport Highlights from './components/Highlights';\nimport NCBOTree from './hooks/NCBOTree';\n\nfunction App() {\n  const [highlights, updateHighlights] = useState({});\n  const [currentHighlight, setCurrentHighlight] = useState('');\n  const [removedHighlights, updateRemovedHighlights] = useState([]);\n  const tree = $(\"#tree\")[0].NCBOTree;\n  // tree.on('afterJumpToClass', classId => {\n  //   console.log('jumped to class.');\n  // });\n  // tree.jumpToClass('https://data.bioontology.org/ontologies/NCIT/classâ€¦ih.gov%2Fxml%2Fowl%2FEVS%2FThesaurus.owl%23C41204');\n\n  console.log(tree);\n\n  return (\n    <div className=\"App\">\n      <Sidebar highlights={highlights} updateHighlights={updateHighlights} currentHighlight={currentHighlight} setCurrentHighlight={setCurrentHighlight}\n        removedHighlights={removedHighlights} updateRemovedHighlights={updateRemovedHighlights} />\n      <Highlights highlights={highlights} currentHighlight={currentHighlight} setCurrentHighlight={setCurrentHighlight}\n        removedHighlights={removedHighlights} />\n    </div>\n  );\n}\n\nexport default App;\n","/Users/steve/Projects/Semantically/my-app/src/reportWebVitals.js",[],"/Users/steve/Projects/Semantically/my-app/src/components/Highlights.js",["78","79","80"],"import $ from 'jquery';\nimport React, {useEffect, useState} from 'react';\nimport sortKeys from '../hooks/sortKeys';\nimport { useAccordionToggle } from 'react-bootstrap/AccordionToggle';\n\nconst Highlights = ({ highlights, currentHighlight, setCurrentHighlight, removedHighlights}) => {\n  const sortedKeys = sortKeys(Object.keys(highlights));\n\n  const [activeIndex, updateActiveIndex] = useState(0);\n  const editor = document.querySelector(\"trix-editor\").editor;\n\n  $(document.querySelector(\"trix-editor\")).click(() => {\n//       console.log(editor.getSelectedRange()[0]);\n      setTimeout(() => updateActiveIndex(editor.getSelectedRange()[0]), 200);\n  });\n\n  // display all highlights\n  useEffect(() => {\n    for (const term in highlights) {\n      const divider = term.indexOf('-');\n      const from = Number(term.substring(0, divider))-1;\n      const to = Number(term.substring(divider+1, term.length));\n\n      const start = editor.getClientRectAtPosition(from);\n      const end = editor.getClientRectAtPosition(to);\n      const width = end.left - start.left;\n\n      $(`#highlight-${term}`).css({\n        width: `${width}px`,\n        top: `${start.top + 25}px`,\n        left: `${start.left}px`\n      });\n    }\n  });\n\n  useEffect(() => {\n    let set = false;\n    for (const key of sortedKeys) {\n    const divider = key.indexOf('-');\n    const highlightStart = Number(key.substring(0, divider))-1;\n    const highlightEnd = Number(key.substring(divider+1, key.length));\n    if (activeIndex <= highlightEnd) {\n//       $('.active').removeClass('active');\n//       $(`#highlight-${key}`).addClass('active');\n      if (activeIndex > highlightStart) {\n        setCurrentHighlight(key);\n        set = true;\n\n        // show accordion card\n//         const toggle = document.querySelector(`.toggle-${key}`);\n//         const collapse = document.querySelector(`.toggle-${key} + .collapse`);\n//         if (!collapse.classList.contains('show')) {\n//             toggle.click();\n//             setTimeout(() => toggle.scrollIntoView(), 300);\n//         }\n      }\n      break;\n    }\n  }\n  if (!set) setCurrentHighlight(null);\n  }, [activeIndex]);\n  return (\n    <div>\n      {Object.keys(highlights).map((term, key) => <div key={key} id={`highlight-${term}`}\n        className={`highlight ${term === currentHighlight ? 'active' : ''} ${removedHighlights.includes(term) ? 'deleted' : ''} ${highlights[term] != -1 ? 'selected' : ''}`}/>)\n      }\n    </div>\n  )\n};\n\nexport default Highlights;\n","/Users/steve/Projects/Semantically/my-app/src/hooks/NCBOTree.js",["81"],"import $ from 'jquery';\n\n\n  const NCBOTree = function(element, opt) {\n//     var _this = this;\n//     var OPTIONS;\n//     var ROOT_ID = \"roots\";\n//     var mousePressed = false;\n//     var $TREE_CONTAINER;\n//     var TREE;\n//     var ROOT;\n//     var startingRoot;\n\n//     OPTIONS = {\n//       autoclose:         false,\n//       beforeExpand:      false,\n//       afterExpand:       false,\n//       afterExpandError:  false,\n//       afterSelect:       false,\n//       afterJumpToClass:  false,\n//       timeout:           999999,\n//       treeClass:         \"ncboTree\",\n//       autocompleteClass: \"ncboAutocomplete\",\n//       width:             350,\n//       ncboAPIURL:        \"http://data.bioontology.org\",\n//       ncboUIURL:         \"http://bioportal.bioontology.org\",\n//       apikey:            null,\n//       ontology:          null,\n//       startingClass:     null,\n//       startingRoot:      ROOT_ID,\n//       defaultRoot:       ROOT_ID\n//     };\n\n//     OPTIONS = $.extend(OPTIONS, opt);\n\n//     // Required options\n//     if (OPTIONS.apikey == null)\n//       throw new Error(\"You must provide an API Key for NCBO Tree Widget to operate\");\n\n//     if (OPTIONS.ontology == null)\n//       throw new Error(\"You must provide an ontology id for NCBO Tree Widget to operate\");\n\n//     this.options = function() {\n//       return OPTIONS;\n//     }\n\n//     this.jumpToClass = function(cls, callback) {\n//       ROOT.html($(\"<span>\").html(\"Loading...\").css(\"font-size\", \"smaller\"));\n//       $.ajax({\n//         url: determineHTTPS(OPTIONS.ncboAPIURL) + \"/ontologies/\" + OPTIONS.ontology + \"/classes/\" + encodeURIComponent(cls) + \"/tree\",\n//         data: {apikey: OPTIONS.apikey, display: \"prefLabel,hasChildren\", no_context: true},\n//         contentType: 'json',\n//         crossDomain: true,\n//         success: function(roots) {\n//           roots = findRootNode(roots);\n//           ROOT.html(formatNodes(roots));\n//           setTreeNodes(ROOT, false);\n\n//           if (typeof callback == 'function') {\n//             callback();\n//           }\n\n//           _this.selectClass(cls);\n//           if (typeof OPTIONS.afterJumpToClass == 'function') {\n//             OPTIONS.afterJumpToClass(cls);\n//           }\n//           $TREE_CONTAINER.trigger(\"afterJumpToClass\", cls);\n//         }\n//       });\n//     }\n\n//     this.selectClass = function(cls) {\n//       var foundClass = $(TREE.find(\"a[data-id='\" + encodeURIComponent(cls) + \"']\"));\n//       $(TREE.find(\"a.active\")[0]).removeClass(\"active\");\n//       foundClass.addClass(\"active\");\n//     }\n\n//     this.selectedClass = function() {\n//       var cls = $(TREE.find(\"a.active\")[0]);\n//       if (cls.length == 0) {\n//         return null;\n//       } else {\n//         return {\n//           id: decodeURIComponent(cls.data(\"id\")),\n//           prefLabel: cls.html(),\n//           URL: cls.attr(\"href\")\n//         };\n//       }\n//     }\n\n//     this.changeOntology = function(ont) {\n//       var newTree = $(\"<ul>\").append($(\"<li>\").addClass(\"root\"));\n//       $TREE_CONTAINER.html(\"\");\n//       TREE = newTree;\n//       OPTIONS.ontology = ont;\n//       _this.init();\n//     }\n\n//     // format the nodes to match what simpleTree is expecting\n//     var formatNodes = function(nodes) {\n//       var holder = $(\"<span>\");\n//       var ul = $(\"<ul>\")\n\n//       // Sort by prefLabel\n//       nodes.sort(function(a, b) {\n//         var aName = a.prefLabel.toLowerCase();\n//         var bName = b.prefLabel.toLowerCase();\n//         return ((aName < bName) ? -1 : ((aName > bName) ? 1 : 0));\n//       });\n\n//       $.each(nodes, function(index, node) {\n//         var li = $(\"<li>\");\n//         var a = $(\"<a>\").attr(\"href\", determineHTTPS(node.links.self)).html(node.prefLabel);\n//         a.attr(\"data-id\", encodeURIComponent(node[\"@id\"]));\n\n//         ul.append(li.append(a));\n\n//         var hasChildrenNotExpanded = typeof node.children !== 'undefined' && node.hasChildren && node.children.length == 0;\n//         if (node.hasChildren && typeof node.children === 'undefined' || hasChildrenNotExpanded) {\n//           var ajax_ul = $(\"<ul>\").addClass(\"ajax\");\n//           var ajax_li = $(\"<li>\");\n//           var ajax_a = $(\"<a>\").attr(\"href\", node.links.children);\n//           li.append(ajax_ul.append(ajax_li.append(ajax_a)));\n//         } else if (typeof node.children !== 'undefined' && node.children.length > 0) {\n//           var child_ul = formatNodes(node.children);\n//           li.attr(\"class\", \"folder-open\")\n//           li.append(child_ul);\n//         }\n//       });\n\n//       holder.append(ul)\n//       return holder.html();\n//     }\n\n//     var findRootNode = function(nodes) {\n//       var startingRoot = (OPTIONS.startingRoot == OPTIONS.defaultRoot) ? null : OPTIONS.startingRoot;\n//       if (startingRoot == null) {return nodes;}\n\n//       var foundNode = false;\n//       var searchQueue = nodes;\n\n//       while (searchQueue.length > 0 || foundNode == false) {\n//         var node = searchQueue.shift();\n//         if (node[\"@id\"] == startingRoot) {\n//           foundNode = [node];\n//         } else if (typeof node.children !== 'undefined' && node.children.length > 0) {\n//           searchQueue = searchQueue.concat(node.children);\n//         }\n//       }\n\n//       return foundNode;\n//     }\n\n//     var closeNearby = function(obj) {\n//       $(obj).siblings().filter('.folder-open, .folder-open-last').each(function() {\n//         var childUl = $('>ul',this);\n//         var className = this.className;\n//         this.className = className.replace('open', 'close');\n//         childUl.hide();\n//       });\n//     };\n\n//     var nodeToggle = function(obj) {\n//       var childUl = $('>ul',obj);\n//       if (childUl.is(':visible')) {\n//         obj.className = obj.className.replace('open','close');\n//         childUl.hide();\n//       } else {\n//         obj.className = obj.className.replace('close','open');\n//         childUl.show();\n//         if (OPTIONS.autoclose)\n//           closeNearby(obj);\n//         if (childUl.is('.ajax'))\n//           setAjaxNodes(childUl, obj.id);\n//       }\n//     };\n\n//     var setAjaxNodes = function(node, parentId, successCallback, errorCallback) {\n//       if (typeof OPTIONS.beforeExpand == 'function') {\n//         OPTIONS.beforeExpand(node);\n//       }\n//       $TREE_CONTAINER.trigger(\"beforeExpand\", node);\n\n//       var url = determineHTTPS($.trim($('a', node).attr(\"href\")));\n//       if (url) {\n//         $.ajax({\n//           type: \"GET\",\n//           url: url,\n//           data: {apikey: OPTIONS.apikey, display: \"prefLabel,hasChildren\", no_context: true},\n//           crossDomain: true,\n//           contentType: 'json',\n//           timeout: OPTIONS.timeout,\n//           success: function(response) {\n//             var nodes = formatNodes(response.collection)\n//             node.removeAttr('class');\n//             node.html(nodes);\n//             $.extend(node, {url:url});\n//             setTreeNodes(node, true);\n//             if (typeof OPTIONS.afterExpand == 'function') {\n//               OPTIONS.afterExpand(node);\n//             }\n//             $TREE_CONTAINER.trigger(\"afterExpand\", node);\n//             if (typeof successCallback == 'function') {\n//               successCallback(node);\n//             }\n//           },\n//           error: function(response) {\n//             if (typeof OPTIONS.afterExpandError == 'function') {\n//               OPTIONS.afterExpandError(node);\n//             }\n//             if (typeof errorCallback == 'function') {\n//               errorCallback(node);\n//             }\n//             $TREE_CONTAINER.trigger(\"afterExpandError\", node);\n//           }\n//         });\n//       }\n//     };\n\n//     var setTreeNodes = function(obj, useParent) {\n//       obj = useParent ? obj.parent() : obj;\n//       $('li>a', obj).addClass('text').bind('selectstart', function() {\n//         return false;\n//       }).click(function() {\n//         var parent = $(this).parent();\n//         var selectedNode = $(this);\n//         $('.active', TREE).attr('class', 'text');\n//         if (this.className == 'text') {\n//           this.className = 'active';\n//         }\n//         if (typeof OPTIONS.afterSelect == 'function') {\n//           OPTIONS.afterSelect(decodeURIComponent(selectedNode.data(\"id\")), selectedNode.text(), selectedNode);\n//         }\n//         $TREE_CONTAINER.trigger(\"afterSelect\", [decodeURIComponent(selectedNode.data(\"id\")), selectedNode.text(), selectedNode]);\n//         return false;\n//       }).bind(\"contextmenu\",function() {\n//         $('.active', TREE).attr('class', 'text');\n//         if (this.className == 'text') {\n//           this.className = 'active';\n//         }\n//         if (typeof OPTIONS.afterContextMenu == 'function') {\n//           OPTIONS.afterContextMenu(parent);\n//         }\n//         return false;\n//       }).mousedown(function(event) {\n//         mousePressed = true;\n//         cloneNode = $(this).parent().clone();\n//         var LI = $(this).parent();\n//         return false;\n//       });\n\n//       $('li', obj).each(function(i) {\n//         var className = this.className;\n//         var open = false;\n//         var cloneNode=false;\n//         var LI = this;\n//         var childNode = $('>ul',this);\n//         if (childNode.size() > 0) {\n//           var setClassName = 'folder-';\n//           if (className && className.indexOf('open') >= 0) {\n//             setClassName = setClassName + 'open';\n//             open = true;\n//           } else {\n//             setClassName = setClassName+'close';\n//           }\n//           this.className = setClassName + ($(this).is(':last-child') ? '-last' : '');\n\n//           if (!open || className.indexOf('ajax') >= 0)\n//             childNode.hide();\n\n//           setTrigger(this);\n//         } else {\n//           var setClassName = 'doc';\n//           this.className = setClassName + ($(this).is(':last-child') ? '-last' : '');\n//         }\n//       }).before('<li class=\"line\">&nbsp;</li>')\n//         .filter(':last-child')\n//         .after('<li class=\"line-last\"></li>');\n//     };\n\n//     var setTrigger = function(node) {\n//       $('>a',node).before('<img class=\"trigger\" src=\"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\" border=0>');\n//       var trigger = $('>.trigger', node);\n//       trigger.click(function(event) {\n//         nodeToggle(node);\n//       });\n//       // TODO: $.browser was removed in jQuery 1.9, check IE compatability\n//       // if (!$.browser.msie) {\n//       //   trigger.css('float','left');\n//       // }\n//     };\n\n//     var determineHTTPS = function(url) {\n//       return url.replace(\"http:\", ('https:' == document.location.protocol ? 'https:' : 'http:'));\n//     }\n\n//     var initAutocomplete = function() {\n//       // Add the autocomplete\n//       var autocompleteContainer = $(\"<div>\").addClass(OPTIONS.autocompleteClass).addClass(\"ncboTree\");\n//       var input = $(\"<input>\")\n//         .addClass(OPTIONS.autocompleteClass)\n//         .css(\"width\", OPTIONS.width)\n//         .attr(\"placeholder\", \"Search for class...\");\n//       autocompleteContainer.append(input);\n//       input.NCBOAutocomplete({\n//         url: OPTIONS.ncboAPIURL + \"/search\",\n//         searchParameter: \"q\",\n//         resultAttribute: \"collection\",\n//         property: \"prefLabel\",\n//         searchTextSuffix: \"*\",\n//         searchFromRoot: startingRoot,\n//         onSelect: function(item, searchInput) {\n//           _this.jumpToClass(item[\"@id\"]);\n//           searchInput.val(\"\");\n//         },\n//         minCharacters: 3,\n//         additionalParameters: {\n//           apikey: OPTIONS.apikey,\n//           no_context: true,\n//           ontologies: OPTIONS.ontology\n//         }\n//       });\n//       $TREE_CONTAINER.append(autocompleteContainer);\n//     }\n\n//     // Populate roots and init tree\n//     this.init = function() {\n//       $TREE_CONTAINER = element;\n//       TREE = $(\"<ul>\").append($(\"<li>\").addClass(\"root\"));\n//       ROOT = $('.root', TREE);\n//       TREE.css(\"width\", OPTIONS.width).addClass(OPTIONS.treeClass);\n//       $TREE_CONTAINER.html(\"\");\n\n//       // Only set starting root when something other than roots is selected\n//       startingRoot = (OPTIONS.startingRoot == OPTIONS.defaultRoot) ? null : OPTIONS.startingRoot;\n\n//       initAutocomplete();\n//       $TREE_CONTAINER.append(TREE);\n\n//       if (OPTIONS.startingClass !== null) {\n//         _this.jumpToClass(OPTIONS.startingClass);\n//         OPTIONS.startingClass = null;\n//       } else {\n//         ROOT.html($(\"<span>\").html(\"Loading...\").css(\"font-size\", \"smaller\"));\n//         $.ajax({\n//           url: determineHTTPS(OPTIONS.ncboAPIURL) + \"/ontologies/\" + OPTIONS.ontology + \"/classes/\" + encodeURIComponent(OPTIONS.startingRoot),\n//           data: {apikey: OPTIONS.apikey, display: \"prefLabel,hasChildren\", no_context: true},\n//           contentType: 'json',\n//           crossDomain: true,\n//           success: function(roots) {\n//             // Flatten potentially nested arrays\n//             roots = $.map([roots], function(n) {\n//               return n;\n//             });\n//             ROOT.html(formatNodes(roots));\n//             setTreeNodes(ROOT, false);\n//           }\n//         });\n//       }\n//     };\n//   }\n\n//   // Returns the original object(s) so they can be chained\n//   $.fn.NCBOTree = function(options) {\n//     return this.each(function() {\n//       var $this = $(this);\n\n//       // Return early if this element already has a plugin instance\n//       if ($this.data('NCBOTree')) return;\n\n//       // pass options to plugin constructor\n//       var ncboTree = new NCBOTree($this, options);\n//       this.NCBOTree = ncboTree;\n\n//       // Add the autocomplete code\n//       $.ajax({\n//         url: ncboTree.options().ncboUIURL.replace(\"http:\", ('https:' == document.location.protocol ? 'https:' : 'http:')) + \"/widgets/jquery.ncbo.autocomplete.js\",\n//         type: \"GET\",\n//         crossDomain: true,\n//         dataType: \"script\",\n//         success: function() {\n//           ncboTree.init();\n\n//           // Store plugin object in this element's data\n//           $this.data('NCBOTree', ncboTree);\n//         }\n//       });\n//     });\n  }\n\nexport default NCBOTree;","/Users/steve/Projects/Semantically/my-app/src/components/Sidebar.js",[],"/Users/steve/Projects/Semantically/my-app/src/hooks/sortKeys.js",[],"/Users/steve/Projects/Semantically/my-app/src/components/SidebarFooter.js",[],"/Users/steve/Projects/Semantically/my-app/src/components/SidebarBody.js",["82"],"import SidebarLoader from './SidebarLoader';\nimport SidebarAccordion from './SidebarAccordion';\n\nimport React, { useState } from 'react';\n\nconst SidebarBody = ({ showLoader, showAccordion, annotations, updateAnnotations,\n  definitions, highlights, updateHighlights, updateDefinitions, currentHighlight,\n  setCurrentHighlight, loadHighlights, updateLoadHighlights, removedHighlights,\n  updateRemovedHighlights }) => {\n\n  return (\n    <div className=\"flex-grow-1\">\n      {showLoader ? <SidebarLoader /> : null}\n      {showAccordion ? <SidebarAccordion annotations={annotations} updateAnnotations={updateAnnotations}\n      definitions={definitions} updateDefinitions={updateDefinitions} updateHighlights={updateHighlights}\n      loadHighlights={loadHighlights} highlights={highlights} updateLoadHighlights={updateLoadHighlights}\n      currentHighlight={currentHighlight} setCurrentHighlight={setCurrentHighlight}\n      removedHighlights={removedHighlights} updateRemovedHighlights={updateRemovedHighlights} /> : null}\n    </div>\n  );\n}\n\nexport default SidebarBody;\n","/Users/steve/Projects/Semantically/my-app/src/components/SidebarHeader.js",["83","84"],"import React, {useState, useEffect} from 'react';\nimport $ from 'jquery';\n\nimport {Button, Dropdown, DropdownButton, Card, Form, Row, Col } from 'react-bootstrap';\n\nimport getRecommenderAnnotations from '../hooks/getRecommenderAnnotations';\nimport getText from '../hooks/getText';\nimport ManualAnnotationPopUp from './ManualOntologySelector';\n\nconst SidebarHeader = ({ updateShowLoader, updateShowAccordion, updateAnnotations, resetAnnotations, updateLoadHighlights }) => {\n  const [showManualAnnotation, updateShowManualAnnotation] = useState(false);\n  const [manualOntologies, updateManualOntologies] = useState({});\n\n  const showAnnotations = () => {\n    updateShowLoader(true);\n    resetAnnotations();\n    getRecommenderAnnotations(getText(), showManualAnnotation ? Object.keys(manualOntologies) : undefined,\n      (formattedAnnotations) => {\n        updateAnnotations(formattedAnnotations);\n        updateShowAccordion(true);\n        updateShowLoader(false);\n        updateLoadHighlights(true);\n      }\n    );\n  }\n\n  // all ontologies selected by default\n  useEffect(() => {\n    $('#all-ontologies').attr('checked', true);\n  });\n\n  return (\n    <React.Fragment>\n      <div id=\"sidebar-header\" className=\"pt-1\">\n        <Button variant=\"outline-dark\" onClick={showAnnotations}>Annotate</Button>{'  '}\n        <Button variant=\"outline-dark\">Remove annotations</Button>\n      </div>\n      <Card className=\"my-2\">\n        <Card.Body className=\"d-flex flex-direction-column justify-content-between pb-1\">\n          <Card.Title>Choose ontologies:</Card.Title>\n          <Form.Group as={Row}>\n            <Col sm={10} className=\"text-left\">\n              <Form.Check onClick={() => updateShowManualAnnotation(false)}\n                type=\"radio\"\n                label=\"All\"\n                name=\"formHorizontalRadios\"\n                id=\"all-ontologies\"\n              />\n              <Form.Check onClick={() => updateShowManualAnnotation(true)}\n                type=\"radio\"\n                label=\"Select\"\n                name=\"formHorizontalRadios\"\n                id=\"select-ontologies\"\n              />\n            </Col>\n          </Form.Group>\n        </Card.Body>\n      </Card>\n      {showManualAnnotation ? <ManualAnnotationPopUp manualOntologies={manualOntologies} updateManualOntologies={updateManualOntologies} /> : null}\n    </React.Fragment>\n  );\n}\n\nexport default SidebarHeader;\n","/Users/steve/Projects/Semantically/my-app/src/components/SidebarLoader.js",[],"/Users/steve/Projects/Semantically/my-app/src/hooks/getText.js",[],"/Users/steve/Projects/Semantically/my-app/src/hooks/getRecommenderAnnotations.js",["85"],"import $ from 'jquery';\n\nconst parseRecommenderData = (data) => {\n  const results = [];\n  for(let i = 0; i < data.length; i++) {\n    results[i] = {};\n    results[i]['acronym'] = data[i]['ontologies'][0]['acronym'];\n    results[i]['annotations'] = [];\n    for (const annotation of data[i]['coverageResult']['annotations']) {\n      results[i]['annotations'].push(annotation);\n    }\n  }\n  return results;\n}\n\nconst formatAnnotations = (results) => {\n  const formattedRes = {};\n\n  for (const res of results) {\n    const acronym = res['acronym'];\n    for (const annotation of res['annotations']) {\n      let key = annotation['from'] + \"-\" + annotation['to'];\n      annotation['acronym'] = acronym;\n      if (key in formattedRes) {\n        formattedRes[key].push(annotation);\n      } else {\n        formattedRes[key] = [annotation];\n      }\n    }\n  }\n    console.log(formattedRes);\n  // remove overlapping annotations\n  for (const res in formattedRes) {\n      for (const res1 in formattedRes) {\n          if (res !== res1) {\n              const from1 = res.substring(0, res.indexOf(\"-\"));\n              const from2 = res1.substring(0, res1.indexOf(\"-\"));\n              const to1 = res.substring(res.indexOf(\"-\")+1, res.length);\n              const to2 = res1.substring(res1.indexOf(\"-\")+1, res1.length);\n\n              if (Number(from1) >= Number(from2) && Number(to1) <= Number(to2)) formattedRes[res] = [];\n              else if (Number(from2) >= Number(from1) && Number(to2) <= Number(to1)) formattedRes[res1] = [];\n          }\n      }\n  }\n  for (const res in formattedRes) {\n      if (formattedRes[res].length == 0) delete formattedRes[res];\n  }\n\n  console.log(formattedRes);\n  return formattedRes;\n}\n\nconst getRecommenderAnnotations = (text, ontologies, callback) => {\n  let ontologyUrl = '';\n  if (ontologies !== undefined) {\n    ontologyUrl += '&ontologies=';\n    for (const ontology of ontologies) {\n      ontologyUrl += ontology + ',';\n    }\n  }\n  const url = 'https://data.bioontology.org/recommender?input='\n    + text\n    + ontologyUrl\n    + '&apikey=89f4c54e-aee8-4af5-95b6-dd7c608f057f'\n  $.ajax({\n\t\turl: url,\n    dataType: 'JSON',\n\t\tsuccess: (data) => {\n//           console.log(data);\n\t\t  // Converting retrieved data to an array of ontology ids\n      const results = parseRecommenderData(data);\n\t\t\t// Executing a callback function, passing an array of ontology IDs\n      callback(formatAnnotations(results));\n    },\n    error: () => {\n    \t// Executing callback function, passing an empty array\n\t\t  callback({});\n    }\n\t});\n}\n\nexport default getRecommenderAnnotations;\n","/Users/steve/Projects/Semantically/my-app/src/components/SidebarAccordion.js",["86","87","88"],"import React, {useState, useEffect} from 'react';\nimport {Accordion, Card, Button, Modal} from 'react-bootstrap';\nimport $ from 'jquery';\n\nimport sortKeys from '../hooks/sortKeys';\nimport getText from '../hooks/getText';\nimport getDefinition from '../hooks/getDefinition';\n\nconst getTermStr = term => {\n  console.log(term);\n  const divider = term.indexOf('-');\n  const from = Number(term.substring(0, divider))-1;\n  const to = Number(term.substring(divider+1, term.length));\n  return getText().substring(from, to);\n}\n\nconst setGetDefinitionListeners = (annotations, setDefinition) => {\n  for (const annotation of Object.values(annotations)) {\n    for (const {from, to, acronym, annotatedClass} of annotation) {\n      const toggle = `${from}-${to}-${acronym}`;\n      const url = annotatedClass.links.self;\n      console.log(toggle);\n      $(`.${toggle}`).click(() => {setDefinition(url); console.log(toggle);});\n    }\n  }\n}\n\nconst removeHighlight = (currentHighlight, setCurrentHighlight, highlights, updateHighlights) => {\n  delete highlights[currentHighlight];\n  updateHighlights({...highlights});\n  setCurrentHighlight('');\n}\n\n// show in NCBOTree\nconst showInTree = text => {\n  while (document.querySelector('#tree > .root > span') !== null) setTimeout(() => {}, 100);\n  const listItem = [...document.querySelectorAll('#tree li')].filter(li => li.innerText.toLowerCase() === text.toLowerCase());\n  if (listItem.length > 0) listItem[0].scrollIntoView();\n  console.log(listItem);\n}\n\nconst SidebarAccordion = ({ annotations, updateAnnotations, definitions, updateDefinitions,\n  updateHighlights, loadHighlights, highlights, updateLoadHighlights, currentHighlight,\n  setCurrentHighlight, removedHighlights, updateRemovedHighlights }) => {\n\n  const [openOntologyModal, updateOpenOntologyModal] = useState(false);\n  const [setDefinitionListeners, updateSetDefinitionListeners] = useState(false);\n  const [ontologyIdx, updateOntologyIdx] = useState(0);\n  // console.log(currentHighlight)\n  const annotatedTerms = sortKeys(Object.keys(annotations));\n//   console.log(annotations);\n  console.log('refresh');\n\n  const setDefinition = url => {\n    if (!(url in definitions)) {\n      getDefinition(url).then(def => updateDefinitions({...definitions, [url]: def}));\n      return 'Loading...';\n    } else {\n      return definitions[url];\n    }\n  }\n\n  if (!setDefinitionListeners) {\n    console.log(\"here\");\n    setGetDefinitionListeners(annotations, setDefinition);\n    updateSetDefinitionListeners(true);\n  }\n\n  if (loadHighlights) {\n    const newHighlights = {};\n    for (const term of annotatedTerms) {\n      newHighlights[term] = -1;\n    }\n    updateHighlights(newHighlights);\n    updateLoadHighlights(false);\n  }\n\n//   useEffect(() => {\n//     for (const term in annotatedTerms) {\n//       $(`toggle-${term}`).click(() => setDefinition(annotations[term][0].annotatedClass.links.self));\n//     }\n//   });\n\n  // Switch annotations\n  useEffect(() => {\n    updateOntologyIdx(0);\n  }, [currentHighlight]);\n\n  // Switch annotations or change ontology\n  useEffect(() => {\n    // if (currentHighlight) {\n    //   const tree = $(\"#tree\")[0].NCBOTree;\n    //   const ontology = annotations[currentHighlight][ontologyIdx];\n    //   console.log(ontology.annotatedClass['@id']);\n    //   showInTree(annotations[currentHighlight][ontologyIdx].text);\n    //   tree.jumpToClass(ontology.annotatedClass['@id']);\n      // change NCBO tree\n\n  }, [currentHighlight, ontologyIdx]);\n\n  if (!currentHighlight) return null;\n\n  return (\n    <React.Fragment>\n    {removedHighlights.includes(currentHighlight) ?\n      <Card className=\"p-4 text-center\"><Button variant=\"outline-success\" size=\"sm\" style={{width: 'fit-content'}} className=\"mx-auto\"\n        onClick={() => updateRemovedHighlights(removedHighlights.filter(key => key !== currentHighlight))}>reannotate</Button></Card> :\n      <Card>\n        <Card.Header className=\"d-flex justify-content-between\">\n          <span>{annotations[currentHighlight][ontologyIdx].acronym}</span>\n          <div>\n            { annotations[currentHighlight].length > 1 ?\n              <Button variant=\"outline-info\" size=\"sm\" onClick={() => updateOpenOntologyModal(true)}>change</Button> : null }{' '}\n            <Button variant=\"outline-danger\" size=\"sm\" onClick={() => updateRemovedHighlights([...removedHighlights, currentHighlight])}>{'delete'}</Button>\n          </div>\n        </Card.Header>\n        <Card.Body>\n          <Card.Text>\n            {setDefinition(annotations[currentHighlight][ontologyIdx].annotatedClass.links.self)}\n          </Card.Text>\n        </Card.Body>\n        {openOntologyModal ? <OntologyModal term={currentHighlight} updateOpenOntologyModal={updateOpenOntologyModal} annotations={annotations} definitions={definitions} setDefinition={setDefinition} updateOntologyIdx={updateOntologyIdx} /> : null}\n      </Card>\n    }\n    </React.Fragment>\n  );\n}\n\nconst OntologyModal = ({term, updateOpenOntologyModal, annotations, definitions, setDefinition, ontologyIdx, updateOntologyIdx }) => {\n  const closeModal = () => updateOpenOntologyModal(false);\n  const getDef = url => {\n    return definitions[url] ? definitions[url] : 'loading...';\n  }\n\n  useEffect(() => {\n    for (const ontology of annotations[term]) {\n      $(`.modal-toggle-${ontology.acronym}`).click(() => setDefinition(ontology.annotatedClass.links.self));\n    }\n  });\n\n  return (\n    <Modal\n      show={true}\n      size=\"lg\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n    >\n      <Modal.Header closeButton onHide={closeModal}>\n        <Modal.Title id=\"contained-modal-title-vcenter\">\n          {getTermStr(term)}\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <Accordion defaultActiveKey={`${term}-modal-0`} id=\"sidebar-accordion\">\n          {annotations[term].map((ontology, idx) =>\n          <Card>\n            <Accordion.Toggle as={Card.Header} eventKey={`${term}-modal-${idx}`} className={`d-flex justify-content-between ${ontology.from}-${ontology.to}-${ontology.acronym} modal-toggle-${ontology.acronym}`}>\n              <span>{ontology.acronym}</span>\n              {ontologyIdx != idx ?\n                <Button variant=\"outline-primary\" size=\"sm\" onClick={() => {\n                    updateOntologyIdx(idx);\n                    updateOpenOntologyModal(false);\n                }}>select</Button>\n                : null}\n            </Accordion.Toggle>\n            <Accordion.Collapse eventKey={`${term}-modal-${idx}`} className={`p-2 p-0 accordion-card`}>\n              <Card>\n                <Card.Body>\n                  <Card.Text>\n                    {getDef(ontology.annotatedClass.links.self)}\n                  </Card.Text>\n                </Card.Body>\n              </Card>\n            </Accordion.Collapse>\n          </Card>\n          )}\n        </Accordion>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button onClick={closeModal}>Close</Button>\n      </Modal.Footer>\n    </Modal>\n  )\n}\n\nexport default SidebarAccordion;\n\n//                 {\n//                   annotations[term].map(({acronym, annotatedClass}, key) => {\n//                   const url = annotatedClass.links.self;\n//                   return (\n//                     <Card>\n//                       <Accordion.Toggle as={Card.Header} eventKey={`${term}-${key}`} className=\"accordion-toggle d-flex justify-content-between\" onClick={() =>\n//                         !(url in definitions) ? getDefinition(url).then(def => updateDefinitions({...definitions, [url]: def})) : null\n//                       }>\n//                         <span>{termStr + \" [ \" + acronym + \" ]\"}</span>\n//                         {\n//                           highlights[term] === key ? <span>selected</span> : <Button variant=\"outline-dark\" size=\"sm\" onClick={() => updateHighlights({...highlights, [term]: key})}>select</Button>\n//                         }\n//                       </Accordion.Toggle>\n//                       <Accordion.Collapse eventKey={`${term}-${key}`}>\n//                         <Card.Body>\n//                           { url in definitions ? definitions[url].substring(0, definitions[url].indexOf('.')+1) : 'Loading...' }\n//                         </Card.Body>\n//                       </Accordion.Collapse>\n//                     </Card>\n//                   )\n//                 })}\n","/Users/steve/Projects/Semantically/my-app/src/components/ManualOntologySelector.js",["89","90","91"],"import React, {useState, useEffect} from 'react';\nimport $ from 'jquery';\nimport {Button} from 'react-bootstrap';\nimport Chips, { Chip } from 'react-chips';\n\nconst fetchAllOntologies = (updateAllOntologies) => {\n  $.ajax({\n    url: 'https://data.bioontology.org/ontologies?include=name,acronym&display_links=false&display_context=false&apikey=89f4c54e-aee8-4af5-95b6-dd7c608f057f',\n    dataType: 'JSON',\n    success: data => {\n      const ontologies = {};\n      for (const ontology of data) {\n        ontologies[ontology.name.trim()] = ontology['acronym'];\n        // differentiate acronyms\n        ontologies[`${ontology['acronym']} `] = ontology.name;\n      }\n      updateAllOntologies(ontologies);\n    }});\n}\n\nconst limitResults = limit => {\n  if (limit < 0) return;\n  const resultList = $('#react-autowhatever-1 > ul');\n  const len = resultList.children().length;\n  if (len > limit) {\n    for (let i = limit; i < len; i++) resultList.children().remove('#react-autowhatever-1--item-' + i);\n  }\n}\n\nconst updateChips = (chips, allOntologies, updateManualOntologies) => {\n  updateManualOntologies(chips.reduce((ontologies, chip) => {\n    if (chip.endsWith(' ')) ontologies[chip.trim()] = allOntologies[chip];\n    else ontologies[`${allOntologies[chip]}`] = chip;\n    return ontologies;\n  }, {}));\n}\n\nconst getSuggestions = (allOntologies, manualOntologies) => {\n  return Object.keys(allOntologies).filter(\n    suggestion => !Object.keys(manualOntologies).concat(Object.values(manualOntologies)).includes(suggestion.trim())\n  );\n}\n\nconst ManualAnnotationPopUp = ({manualOntologies, updateManualOntologies}) => {\n\n  const [allOntologies, updateAllOntologies] = useState({});\n  const [loadedAllOntologies, updateLoadedAllOntologies] = useState(false);\n  const [hideOntologyField, updateHideOntologyField] = useState(false);\n\n  if (!loadedAllOntologies) {\n      fetchAllOntologies(updateAllOntologies);\n      updateLoadedAllOntologies(true);\n  }\n\n\n  return (\n    <div className=\"mb-3\">\n      {hideOntologyField ?\n        <Button variant=\"outline-secondary\" className=\"pt-1 pb-2 w-100\" onClick={() => updateHideOntologyField(false)}>show ontologies</Button> :\n        <React.Fragment>\n          <Chips\n            placeholder={\"Enter ontology\"}\n            value={Object.values(manualOntologies)}\n            onChange={chips => updateChips(chips, allOntologies, updateManualOntologies)}\n            suggestions={getSuggestions(allOntologies, manualOntologies)}\n            highlightFirstSuggestion={true}\n          />\n          <Button variant=\"link\" onClick={() => updateHideOntologyField(true)}>hide ontologies</Button>\n        </React.Fragment>\n      }\n      </div>\n  );\n}\n\nexport default ManualAnnotationPopUp;\n","/Users/steve/Projects/Semantically/my-app/src/hooks/getDefinition.js",[],{"ruleId":"92","replacedBy":"93"},{"ruleId":"94","replacedBy":"95"},{"ruleId":"96","severity":1,"message":"97","line":10,"column":8,"nodeType":"98","messageId":"99","endLine":10,"endColumn":16},{"ruleId":"96","severity":1,"message":"100","line":4,"column":10,"nodeType":"98","messageId":"99","endLine":4,"endColumn":28},{"ruleId":"101","severity":1,"message":"102","line":61,"column":6,"nodeType":"103","endLine":61,"endColumn":19,"suggestions":"104"},{"ruleId":"105","severity":1,"message":"106","line":65,"column":148,"nodeType":"107","messageId":"108","endLine":65,"endColumn":150},{"ruleId":"96","severity":1,"message":"109","line":1,"column":8,"nodeType":"98","messageId":"99","endLine":1,"endColumn":9},{"ruleId":"96","severity":1,"message":"110","line":4,"column":17,"nodeType":"98","messageId":"99","endLine":4,"endColumn":25},{"ruleId":"96","severity":1,"message":"111","line":4,"column":17,"nodeType":"98","messageId":"99","endLine":4,"endColumn":25},{"ruleId":"96","severity":1,"message":"112","line":4,"column":27,"nodeType":"98","messageId":"99","endLine":4,"endColumn":41},{"ruleId":"105","severity":1,"message":"113","line":47,"column":36,"nodeType":"107","messageId":"108","endLine":47,"endColumn":38},{"ruleId":"96","severity":1,"message":"114","line":28,"column":7,"nodeType":"98","messageId":"99","endLine":28,"endColumn":22},{"ruleId":"96","severity":1,"message":"115","line":35,"column":7,"nodeType":"98","messageId":"99","endLine":35,"endColumn":17},{"ruleId":"105","severity":1,"message":"106","line":159,"column":28,"nodeType":"107","messageId":"108","endLine":159,"endColumn":30},{"ruleId":"96","severity":1,"message":"116","line":1,"column":26,"nodeType":"98","messageId":"99","endLine":1,"endColumn":35},{"ruleId":"96","severity":1,"message":"117","line":4,"column":17,"nodeType":"98","messageId":"99","endLine":4,"endColumn":21},{"ruleId":"96","severity":1,"message":"118","line":21,"column":7,"nodeType":"98","messageId":"99","endLine":21,"endColumn":19},"no-native-reassign",["119"],"no-negated-in-lhs",["120"],"no-unused-vars","'NCBOTree' is defined but never used.","Identifier","unusedVar","'useAccordionToggle' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'setCurrentHighlight' and 'sortedKeys'. Either include them or remove the dependency array. If 'setCurrentHighlight' changes too often, find the parent component that defines it and wrap that definition in useCallback.","ArrayExpression",["121"],"eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","'$' is defined but never used.","'useState' is defined but never used.","'Dropdown' is defined but never used.","'DropdownButton' is defined but never used.","Expected '===' and instead saw '=='.","'removeHighlight' is assigned a value but never used.","'showInTree' is assigned a value but never used.","'useEffect' is defined but never used.","'Chip' is defined but never used.","'limitResults' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"122","fix":"123"},"Update the dependencies array to be: [activeIndex, setCurrentHighlight, sortedKeys]",{"range":"124","text":"125"},[2118,2131],"[activeIndex, setCurrentHighlight, sortedKeys]"]